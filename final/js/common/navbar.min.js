function markNotification(){var e=$(this).attr("id");e=e.replace("notification",""),$.post("../api/mark_notification.php",{id:e},function(t,i,n){$("#notification"+e).remove();var a=$("#notifications .badge");a.html(parseInt(a.html())-1)}).fail(function(t){$("#notification"+e).highlightAnimation(red,1500)})}function prepareEditCredentialsModal(){$("#UserStatus1").fadeOut(),$("#EditCredentialsForm").trigger("reset");var e=$("#meEmail").text();$("#editCredentialsFormName").val(e);var t=$("#UserNameNav").text();console.log(t),t=t.trim();var i=t.substring(t.indexOf("("),t.length),n=t.substring(0,t.indexOf("(")-1);"Amigo"!=i&&($("#editCredentialsFormViewerName").val(n),console.log(t))}function editCredentials(e,t){var i=$("#editCredentialsFormName").val(),n=$("#editCredentialsFormOldPw").val(),a=$("#editCredentialsFormNewPw").val(),o=$("#editCredentialsFormConfirmPw").val(),r=$("#UserNameNav").text(),s=r.substring(r.indexOf("(")+1,r.length-1),l=r.substring(0,r.indexOf("(")-1),d="";if("Amigo"!==s&&(d=$("#editCredentialsFormViewerName").val()),!(i!==t&&0!=i.length||0!=d.length&&l!==d||0!=n.length))return $("#editCredentialsModal").modal("hide"),!0;if(0!=n.length){if(0==a.length||0==o.length||a==n||a!==o)return $("#UserStatus1").fadeIn(),!1}else if(0!=a.length||0!=o.length)return $("#UserStatus1").fadeIn(),!1;$.post("../api/edit_credentials.php",{id:e,old_name:t,new_name:i,viewer_new_name:d,old_pw:n,new_pw:a,confirm_pw:o},function(e,t,n){"Amigo"!==s?(console.log(d+" "+s),void 0!==d&&0!=d.length&&$("#UserNameNav").html(d+" ("+s+")")):$("#UserEmail").html(i),$("#UserStatus2").fadeIn(1500),setTimeout(function(){$("#editCredentialsModal").modal("hide")},2e3),$("#UserStatus2").fadeOut()}).fail(function(e){console.log(e),$("#UserStatus1").fadeIn()})}function config(){$("#notifications a").click(function(e){$(this).parent().toggleClass("open")}),$("body").click(function(e){$("#notifications").is(e.target)||0!==$("#notifications").has(e.target).length||0!==$(".open").has(e.target).length||$("#notifications").removeClass("open"),$("#navsettings").is(e.target)||0!==$("#navsettings").has(e.target).length||0!==$(".open").has(e.target).length||$("#navsettings").removeClass("open")}),$("#notifications li").click(markNotification),$("#EditCredentials").click(prepareEditCredentialsModal),$("#navsettings a").click(function(e){$(this).parent().toggleClass("open")})}$(document).ready(config);