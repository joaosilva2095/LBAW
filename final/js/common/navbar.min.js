function markNotification(){var e=$(this).attr("id");e=e.replace("notification",""),$.post("../api/mark_notification.php",{id:e},function(t,i,n){$("#notification"+e).remove();var a=$("#notifications .badge");a.html(parseInt(a.html())-1)}).fail(function(t){$("#notification"+e).highlightAnimation(red,1500)})}function prepareEditCredentialsModal(){var e=$("#meEmail").text();$("#editCredentialsFormName").val(e);var t=$("#UserNameNav").text(),i=t.substring(t.indexOf("("),t.length),n=t.substring(0,t.indexOf("(")-1);"Amigo"!=i&&$("#editCredentialsFormViewerName").val(n)}function editCredentials(e,t){var i=$("#editCredentialsFormName").val(),n=$("#editCredentialsFormOldPw").val(),a=$("#editCredentialsFormNewPw").val(),o=$("#editCredentialsFormConfirmPw").val(),r=$("#UserNameNav").text(),l=r.substring(r.indexOf("("),r.length),s=(r.substring(0,r.indexOf("(")-1),"");if("Amigo"!=l&&(s=$("#editCredentialsFormViewerName").val()),(i===t||0==i.length)&&0==n.length)return $("#editCredentialsModal").modal("hide"),!0;if(0!=n.length){if(0==a.length||0==o.length||a==n||a!==o)return $("#UserStatus1").fadeIn(),!1}else if(0!=a.length||0!=o.length)return $("#UserStatus1").fadeIn(),!1;$.post("../api/edit_credentials.php",{id:e,old_name:t,new_name:i,viewer_new_name:s,old_pw:n,new_pw:a,confirm_pw:o},function(e,t,n){"Amigo"!=l?0!=s.length&&$("#UserNameNav").html(name+" "+l):$("#UserEmail").html(i),$("#UserStatus2").fadeIn(1e3),setTimeout(function(){$("#editCredentialsModal").modal("hide")},1500)}).fail(function(e){console.log(e),$("#UserStatus1").fadeIn()})}function config(){$("#notifications a").click(function(e){$(this).parent().toggleClass("open")}),$("body").click(function(e){$("#notifications").is(e.target)||0!==$("#notifications").has(e.target).length||0!==$(".open").has(e.target).length||$("#notifications").removeClass("open")}),$("#notifications li").click(markNotification),$("#EditCredentials").click(prepareEditCredentialsModal),$("#settings a").click(function(e){$(this).parent().toggleClass("open")})}$(document).ready(config);