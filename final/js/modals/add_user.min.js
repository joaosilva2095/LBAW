function registerUser(){var t=$("#identification").val(),e=$("#role").val(),n=$("#email").val(),i=$("#password").val(),d=$("#name").val(),a=$("#gender").val(),l=$("#birthdate").val(),r=$("#nif").val(),o=$("#cellphone").val(),c=$("#paymethod").val(),v=$("#periodicity").val();"Amigo"!==e&&(r=" ",o=" ",c=" ",v=" "),$.post("../api/register_user.php",{id:t,role:e,email:n,password:i,name:d,gender:a,birth:l,nif:r,cellphone:o,donative_type:c,periodicity:v},function(i,h,s){if(""===i){$("#addUserModal").modal("hide");var f=$("#users tr:last"),m=f.clone();m.attr("id","user"+t),m.removeClass("warning"),f.after(m),$("#user"+t+" td:nth-child(1)").html(t),$("#user"+t+" td:nth-child(2)").html(d),$("#user"+t+" td:nth-child(3)").html(n),$("#user"+t+" td:nth-child(4)").html(a),$("#user"+t+" td:nth-child(5)").html(l),$("#user"+t+" td:nth-child(6)").html(o),$("#user"+t+" td:nth-child(7)").html(r),$("#user"+t+" td:nth-child(8)").html(c),$("#user"+t+" td:nth-child(9)").html(v),$("#user"+t+" td:nth-child(10)").html(e),$("#user"+t+" td:nth-child(11) a").attr("href","amigo.php?user="+t),m.highlightAnimation(green,1500),$('i[data-original-title="Notificar"]').click(configAddNotificationModal),$('i[data-original-title="Editar"]').click(configEditUserModal),$('i[data-original-title="Eliminar"]').click(confirmRemoveUser),enableTooltips()}else $("#addUserStatus").fadeIn()}).fail(function(t){$("#addUserStatus").fadeIn()})}function updateUser(){var t=$("#identification").val(),e=$("#role").val(),n=$("#email").val(),d=($("#password").val(),$("#name").val()),a=$("#gender").val(),l=$("#birthdate").val(),r=$("#nif").val(),o=$("#cellphone").val(),c=$("#paymethod").val(),v=$("#periodicity").val();"Amigo"!==e&&(r=" ",o=" ",c=" ",v=" "),$.post("../api/edit_user.php",{id:t,role:e,email:n,name:d,gender:a,birth:l,nif:r,cellphone:o,donative_type:c,periodicity:v},function(i,h,s){""===i?($("#addUserModal").modal("hide"),$("#user"+t+" td:nth-child(2)").html(d),$("#user"+t+" td:nth-child(3)").html(n),$("#user"+t+" td:nth-child(4)").html(a),$("#user"+t+" td:nth-child(5)").html(l),$("#user"+t+" td:nth-child(6)").html(o),$("#user"+t+" td:nth-child(7)").html(r),$("#user"+t+" td:nth-child(8)").html(c),$("#user"+t+" td:nth-child(9)").html(v),$("#user"+t+" td:nth-child(10)").html(e),$("#user"+t).highlightAnimation(green,1500)):$("#addUserStatus").fadeIn()}).fail(function(t){$("#addUserStatus").fadeIn()})}function configNewUserModal(){$("#addUserModal form").trigger("reset"),$("#friendOnlyParams").fadeIn(),$('label[for="password"]').show(),$("#password").attr("required","required"),$("#password").show(),$("#identification").removeAttr("disabled"),$("#addUserModalTitle").html("Novo Utilizador")}function config(){$("#newUser").click(configNewUserModal),$("#addUserForm").submit(function(t){t.preventDefault(),"Novo Utilizador"===$("#addUserModalTitle").text()?registerUser():updateUser()}),$("#addUserStatus").click(function(){$(this).fadeOut()}),$("#role").change(function(){var t=$("#role").val();"Amigo"===t?($("#nif").attr("required","required"),$("#cellphone").attr("required","required"),$("#paymethod").attr("required","required"),$("#periodicity").attr("required","required"),$("#friendOnlyParams").fadeIn()):($("#nif").removeAttr("required"),$("#cellphone").removeAttr("required"),$("#paymethod").removeAttr("required"),$("#periodicity").removeAttr("required"),$("#friendOnlyParams").fadeOut())})}$(document).ready(config);
