function removeUser(){var t=$(this).closest("tr").attr("id");t=t.replace("user",""),$.post("../api/delete_user.php",{id:t},function(i,e,a){$("#user"+t).remove()}).fail(function(i){$("#user"+t).highlightAnimation(red,1500)})}function registerUser(){var t=$("#identification").val(),i=$("#role").val(),e=$("#email").val(),a=$("#password").val(),r=$("#name").val(),l=$("#gender").val(),o=$("#birthdate").val(),d=$("#nif").val(),n=$("#cellphone").val(),s=$("#paymethod").val(),c=$("#periodicity").val();"Amigo"!==i&&(d=" ",n=" ",s=" ",c=" "),$.post("../api/register_user.php",{id:t,role:i,email:e,password:a,name:r,gender:l,birth:o,nif:d,cellphone:n,donative_type:s,periodicity:c},function(a,h,u){$("#userModal").modal("hide");var f=$("#users tr:last"),g=f.clone();g.attr("id","user"+t),g.removeClass("warning"),f.after(g),$("#user"+t+" td:nth-child(1)").html(t),$("#user"+t+" td:nth-child(2)").html(r),$("#user"+t+" td:nth-child(3)").html(e),$("#user"+t+" td:nth-child(4)").html(l),$("#user"+t+" td:nth-child(5)").html(o),$("#user"+t+" td:nth-child(6)").html(n),$("#user"+t+" td:nth-child(7)").html(d),$("#user"+t+" td:nth-child(8)").html(s),$("#user"+t+" td:nth-child(9)").html(c),$("#user"+t+" td:nth-child(10)").html(i),g.highlightAnimation(green,1500),$('i[data-original-title="Eliminar"]').click(removeUser),enableTooltips()}).fail(function(t){$("#userStatus").fadeIn()})}function updateUser(){var t=$("#identification").val(),i=$("#role").val(),e=$("#email").val(),r=($("#password").val(),$("#name").val()),l=$("#gender").val(),o=$("#birthdate").val(),d=$("#nif").val(),n=$("#cellphone").val(),s=$("#paymethod").val(),c=$("#periodicity").val();"Amigo"!==i&&(d=" ",n=" ",s=" ",c=" "),$.post("../api/edit_user.php",{id:t,role:i,email:e,name:r,gender:l,birth:o,nif:d,cellphone:n,donative_type:s,periodicity:c},function(a,h,u){$("#userModal").modal("hide"),$("#user"+t+" td:nth-child(1)").html(t),$("#user"+t+" td:nth-child(2)").html(r),$("#user"+t+" td:nth-child(3)").html(e),$("#user"+t+" td:nth-child(4)").html(l),$("#user"+t+" td:nth-child(5)").html(o),$("#user"+t+" td:nth-child(6)").html(n),$("#user"+t+" td:nth-child(7)").html(d),$("#user"+t+" td:nth-child(8)").html(s),$("#user"+t+" td:nth-child(9)").html(c),$("#user"+t+" td:nth-child(10)").html(i),$("#user"+t).highlightAnimation(green,1500)}).fail(function(t){$("#userStatus").fadeIn()})}function configNewUserModal(){$("#userModal form").trigger("reset"),$("#friendOnlyParams").fadeIn(),$('label[for="password"]').show(),$("#password").attr("required","required"),$("#password").show(),$("#identification").removeAttr("disabled"),$("#userModalTitle").html("Novo Utilizador")}function config(){$("#newUser").click(configNewUserModal),$("#userForm").submit(function(t){t.preventDefault(),"Novo Utilizador"==$("#userModalTitle").text()?registerUser():updateUser()}),$("#userStatus").click(function(){$(this).fadeOut()}),$("#role").change(function(){var t=$("#role").val();"Amigo"===t?($("#nif").attr("required","required"),$("#cellphone").attr("required","required"),$("#paymethod").attr("required","required"),$("#periodicity").attr("required","required"),$("#friendOnlyParams").fadeIn()):($("#nif").removeAttr("required"),$("#cellphone").removeAttr("required"),$("#paymethod").removeAttr("required"),$("#periodicity").removeAttr("required"),$("#friendOnlyParams").fadeOut())})}$(document).ready(config);
