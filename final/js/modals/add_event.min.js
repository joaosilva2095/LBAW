function registerEvent(){var e=$("#name").val(),t=$("#description").val(),i=$("#date").val(),r=$("#duration").val(),d=$("#place").val(),l=$("#price").val();$.post("../api/register_event.php",{name:e,description:t,date:i,duration:r,place:d,price:l},function(a,n,o){$("#addEventModal").modal("hide");var h=$("#events tr:last"),s=h.clone();s.attr("id","event"+id),h.after(s),$("#event"+id+" td:nth-child(1)").html(id),$("#event"+id+" td:nth-child(2)").html(t),$("#event"+id+" td:nth-child(3)").html(e),$("#event"+id+" td:nth-child(4)").html(i),$("#event"+id+" td:nth-child(5)").html(r),$("#event"+id+" td:nth-child(6)").html(d),$("#event"+id+" td:nth-child(7)").html(l),s.highlightAnimation(green,1500),$('i[data-original-title="Eliminar"]').click(removeEvent),enableTooltips()}).fail(function(e){$("#addEventStatus").fadeIn()})}function updateEvent(){var e=$("#identification").val(),t=$("#role").val(),i=$("#email").val(),d=($("#password").val(),$("#name").val()),l=$("#gender").val(),a=$("#birthdate").val(),n=$("#nif").val(),o=$("#cellphone").val(),h=$("#paymethod").val(),s=$("#periodicity").val();"Amigo"!==t&&(n=" ",o=" ",h=" ",s=" "),$.post("../api/edit_user.php",{id:e,role:t,email:i,name:d,gender:l,birth:a,nif:n,cellphone:o,donative_type:h,periodicity:s},function(r,c,u){$("#addUserModal").modal("hide"),$("#user"+e+" td:nth-child(1)").html(e),$("#user"+e+" td:nth-child(2)").html(d),$("#user"+e+" td:nth-child(3)").html(i),$("#user"+e+" td:nth-child(4)").html(l),$("#user"+e+" td:nth-child(5)").html(a),$("#user"+e+" td:nth-child(6)").html(o),$("#user"+e+" td:nth-child(7)").html(n),$("#user"+e+" td:nth-child(8)").html(h),$("#user"+e+" td:nth-child(9)").html(s),$("#user"+e+" td:nth-child(10)").html(t),$("#user"+e).highlightAnimation(green,1500)}).fail(function(e){$("#addUserStatus").fadeIn()})}function configNewUserModal(){$("#addUserModal form").trigger("reset"),$("#friendOnlyParams").fadeIn(),$('label[for="password"]').show(),$("#password").attr("required","required"),$("#password").show(),$("#identification").removeAttr("disabled"),$("#addUserModalTitle").html("Novo Utilizador")}function config(){$("#newUser").click(configNewUserModal),$("#addUserForm").submit(function(e){e.preventDefault(),"Novo Utilizador"===$("#addUserModalTitle").text()?registerUser():updateUser()}),$("#addUserStatus").click(function(){$(this).fadeOut()}),$("#role").change(function(){var e=$("#role").val();"Amigo"===e?($("#nif").attr("required","required"),$("#cellphone").attr("required","required"),$("#paymethod").attr("required","required"),$("#periodicity").attr("required","required"),$("#friendOnlyParams").fadeIn()):($("#nif").removeAttr("required"),$("#cellphone").removeAttr("required"),$("#paymethod").removeAttr("required"),$("#periodicity").removeAttr("required"),$("#friendOnlyParams").fadeOut())})}$(document).ready(config);
